<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Competing risks functions — crr • riskybiz</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Competing risks functions — crr" />
<meta property="og:description" content="These functions override the crr function provided in cmprsk
to produce more manageable competing risks model results (i.e. include
model.frame and formula in output) so that results can leverage functions
like broom::tidy the same way other regression function results do." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">riskybiz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/margarethannum/riskybiz">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Competing risks functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/margarethannum/riskybiz/blob/master/R/competingrisks.R'><code>R/competingrisks.R</code></a></small>
    <div class="hidden name"><code>crr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions override the <code>crr</code> function provided in cmprsk
to produce more manageable competing risks model results (i.e. include
model.frame and formula in output) so that results can leverage functions
like <code>broom::tidy</code> the same way other regression function results do.</p>
    </div>

    <pre class="usage"><span class='fu'>crr</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for formula</span>
<span class='fu'>crr</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>crr</span>(<span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>formula object with response on the left of a ~ operator
and terms on the right. Event variable can have multiple levels for use in
competing risks.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a data.frame in which to interpret the variables named in the
<code>formula</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='https://rdrr.io/pkg/cmprsk/man/crr.html'>cmprsk::crr</a></code></p><dl class='dl-horizontal'>
  <dt>ftime</dt><dd><p>vector of failure/censoring times</p></dd>
  <dt>fstatus</dt><dd><p>vector with a unique code for each failure type and a separate code for
censored observations</p></dd>
  <dt>cov1</dt><dd><p>matrix (nobs x ncovs) of fixed covariates (either cov1, cov2, or both
are required)</p></dd>
  <dt>cov2</dt><dd><p>matrix of covariates that will be multiplied by functions of time; 
if used, often these covariates would also appear in cov1
to give a prop hazards effect plus a time interaction</p></dd>
  <dt>tf</dt><dd><p>functions of time.  A function that takes a vector of times as
an argument and returns a matrix whose jth column is the value of 
the time function corresponding to the jth column of cov2 evaluated
at the input time vector.  At time <code>tk</code>, the
model includes the term <code>cov2[,j]*tf(tk)[,j]</code> as a covariate.</p></dd>
  <dt>cengroup</dt><dd><p>vector with different values for each group with 
a distinct censoring distribution (the censoring distribution
is estimated separately within these groups).  All data in one group, if
missing.</p></dd>
  <dt>failcode</dt><dd><p>code of fstatus that denotes the failure type of interest</p></dd>
  <dt>cencode</dt><dd><p>code of fstatus that denotes censored observations</p></dd>
  <dt>subset</dt><dd><p>a logical vector specifying a subset of cases to include in the
  analysis</p></dd>
  <dt>na.action</dt><dd><p>a function specifying the action to take for any cases missing any of
  ftime, fstatus, cov1, cov2, cengroup, or subset.</p></dd>
  <dt>gtol</dt><dd><p>iteration stops when a function of the gradient is <code>&lt; gtol</code></p></dd>
  <dt>maxiter</dt><dd><p>maximum number of iterations in Newton algorithm (0 computes
scores and var at <code>init</code>, but performs no iterations)</p></dd>
  <dt>init</dt><dd><p>initial values of regression parameters (default=all 0)</p></dd>
  <dt>variance</dt><dd><p>If <code>FALSE</code>, then suppresses computation of the variance estimate
  and residuals</p></dd>

</dl></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>trial</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span>(<span class='no'>trial</span>)

 <span class='co'>#original crr</span>
 <span class='no'>covars</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span>(~ <span class='no'>age</span> + <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>trt</span>) + <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>grade</span>), <span class='no'>trial</span>)[,-<span class='fl'>1</span>]
 <span class='no'>ftime1</span> <span class='kw'>&lt;-</span> <span class='no'>trial</span>$<span class='no'>ttdeath</span>
 <span class='no'>fstatus1</span> <span class='kw'>&lt;-</span> <span class='no'>trial</span>$<span class='no'>death_cr</span>
 <span class='no'>mod_orig</span> <span class='kw'>&lt;-</span> <span class='fu'>crr</span>(<span class='kw'>ftime</span><span class='kw'>=</span><span class='no'>ftime1</span>,
          <span class='kw'>fstatus</span> <span class='kw'>=</span> <span class='no'>fstatus1</span>,
          <span class='kw'>cov1</span> <span class='kw'>=</span> <span class='no'>covars</span>)

 <span class='co'># using new wrapper function, accepts data and formula</span>
 <span class='no'>mod_new</span> <span class='kw'>&lt;-</span> <span class='fu'>crr</span>(<span class='fu'>Surv</span>(<span class='no'>ttdeath</span>, <span class='no'>death_cr</span>) ~ <span class='no'>age</span> + <span class='no'>trt</span> + <span class='no'>grade</span>, <span class='no'>trial</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Invalid status value, converted to NA</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://margarethannum.github.io/'>Margie Hannum</a>, <a href='http://www.danieldsjoberg.com/'>Daniel D. Sjoberg</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


